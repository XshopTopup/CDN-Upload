<!-- views/docs.ejs -->
<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dokumentasi API • Arsyilla URL</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
<header class="site-header">
  <div class="container">
    <div class="brand">Arsyilla URL</div>
    <nav><a href="/">Beranda</a></nav>
  </div>
</header>

<main class="container">
  <section class="card">
    <h1>Dokumentasi API</h1>
    <p><b>Base URL:</b> <code><%= BASE_URL %></code> • TZ: <code><%= TZ %></code></p>
    <div class="tabs">
      <a href="#quickstart">Quickstart</a>
      <a href="#env">ENV</a>
      <a href="#endpoint">Endpoint</a>
      <a href="#files">Penamaan</a>
      <a href="#error">Error</a>
    </div>
  </section>

  <section id="quickstart" class="card">
    <h2>Quickstart</h2>
<pre><code>curl -X POST "<%= BASE_URL %>upload" \
  -F "file=@./contoh.png"</code></pre>
  </section>

  <section id="env" class="card">
    <h2>ENV</h2>
    <table class="table">
      <thead><tr><th>Key</th><th>Wajib</th><th>Keterangan</th></tr></thead>
      <tbody>
        <tr><td>PORT</td><td>Ya</td><td>Port server</td></tr>
        <tr><td>BASE_URL</td><td>Ya</td><td>Mis. https://url.arsyilla.my.id/</td></tr>
        <tr><td>GH_TOKEN</td><td>Ya</td><td>Token GitHub</td></tr>
        <tr><td>GH_OWNER</td><td>Ya</td><td>Owner repo</td></tr>
        <tr><td>GH_REPO</td><td>Ya</td><td>Nama repo</td></tr>
        <tr><td>GH_BRANCH</td><td>Tidak</td><td>Default main</td></tr>
      </tbody>
    </table>
  </section>

  <section id="endpoint" class="card">
    <h2>Endpoint</h2>
    <h3>POST <code>/upload</code></h3>
    <p>Form field <code>file</code>. Respon: <code>slug</code>, <code>link</code>, <code>raw</code>, <code>repo_url</code>.</p>
    <h3>GET <code>/:slug</code></h3>
    <p>Halaman detail file.</p>
    <h3>GET <code>/:slug/download</code></h3>
    <p>Unduh langsung dari RAW.</p>
  </section>

  <section id="files" class="card">
    <h2>Penamaan & Folder</h2>
    <p>Nama: <code>DD-MMMM-YYYY~HH:mm:ss&lt;ext&gt;</code> (WIB).</p>
    <ul>
      <li><code>image/</code>, <code>videos/</code>, <code>archives/</code>, <code>docs/</code>, <code>texts/</code>, <code>data/</code>, fallback <code>files/</code></li>
    </ul>
  </section>

  <section id="error" class="card">
    <h2>Error</h2>
    <table class="table">
      <thead><tr><th>Kode</th><th>Pesan</th><th>Solusi</th></tr></thead>
      <tbody>
        <tr><td>400</td><td>file kosong</td><td>Kirim multipart dengan field <code>file</code></td></tr>
        <tr><td>413</td><td>Payload too large</td><td>&le;100MB atau tingkatkan limit</td></tr>
        <tr><td>500</td><td>upload_gagal</td><td>Cek GH_TOKEN, jaringan, rate limit</td></tr>
        <tr><td>404</td><td>tidak ditemukan</td><td>Slug tidak ada</td></tr>
      </tbody>
    </table>
  </section>
</main>

<footer class="site-footer">
  <div class="container">© <%= new Date().getFullYear() %> Arsyilla</div>
</footer>
</body>
</html>
